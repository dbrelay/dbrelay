<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FreeTDS API: /usr/local/users/home/jklowden/projects/releases/freetds/0.82/include/tdsodbc.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a></div>
<h1>tdsodbc.h</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/* FreeTDS - Library of routines accessing Sybase and Microsoft databases</span>
00002 <span class="comment"> * Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005  Brian Bruns</span>
00003 <span class="comment"> * Copyright (C) 2004, 2005, 2006, 2007  Frediano Ziglio</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> * This library is free software; you can redistribute it and/or</span>
00006 <span class="comment"> * modify it under the terms of the GNU Library General Public</span>
00007 <span class="comment"> * License as published by the Free Software Foundation; either</span>
00008 <span class="comment"> * version 2 of the License, or (at your option) any later version.</span>
00009 <span class="comment"> *</span>
00010 <span class="comment"> * This library is distributed in the hope that it will be useful,</span>
00011 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00012 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00013 <span class="comment"> * Library General Public License for more details.</span>
00014 <span class="comment"> *</span>
00015 <span class="comment"> * You should have received a copy of the GNU Library General Public</span>
00016 <span class="comment"> * License along with this library; if not, write to the</span>
00017 <span class="comment"> * Free Software Foundation, Inc., 59 Temple Place - Suite 330,</span>
00018 <span class="comment"> * Boston, MA 02111-1307, USA.</span>
00019 <span class="comment"> */</span>
00020 
00021 <span class="preprocessor">#ifndef _sql_h_</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#define _sql_h_</span>
00023 <span class="preprocessor"></span>
00024 <span class="preprocessor">#include "<a class="code" href="a00163.html">tds.h</a>"</span>
00025 
00026 <span class="preprocessor">#if defined(UNIXODBC) || defined(TDS_NO_DM)</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#include &lt;sql.h&gt;</span>
00028 <span class="preprocessor">#include &lt;sqlext.h&gt;</span>
00029 <span class="preprocessor">#ifdef UNIXODBC</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#include &lt;odbcinst.h&gt;</span>
00031 <span class="preprocessor">#endif</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#else </span><span class="comment">/* IODBC */</span>
00033 <span class="preprocessor">#include &lt;isql.h&gt;</span>
00034 <span class="preprocessor">#include &lt;isqlext.h&gt;</span>
00035 <span class="preprocessor">#ifdef HAVE_IODBCINST_H</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#include &lt;iodbcinst.h&gt;</span>
00037 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IODBCINST_H */</span>
00038 <span class="preprocessor">#endif</span>
00039 <span class="preprocessor"></span>
00040 <span class="preprocessor">#ifndef HAVE_SQLLEN</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#ifndef SQLULEN</span>
00042 <span class="preprocessor"></span><span class="preprocessor">#define SQLULEN SQLUINTEGER</span>
00043 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#ifndef SQLLEN</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#define SQLLEN SQLINTEGER</span>
00046 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00048 <span class="preprocessor"></span>
00049 <span class="preprocessor">#ifndef HAVE_SQLSETPOSIROW</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#define SQLSETPOSIROW SQLUSMALLINT</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00052 <span class="preprocessor"></span>
00053 <span class="preprocessor">#ifndef HAVE_SQLROWOFFSET</span>
00054 <span class="preprocessor"></span><span class="preprocessor">#define SQLROWOFFSET SQLLEN</span>
00055 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00056 <span class="preprocessor"></span>
00057 <span class="preprocessor">#ifndef HAVE_SQLROWSETSIZE</span>
00058 <span class="preprocessor"></span><span class="preprocessor">#define SQLROWSETSIZE SQLULEN</span>
00059 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00060 <span class="preprocessor"></span>
00061 <span class="preprocessor">#ifdef __cplusplus</span>
00062 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span>
00063 {
00064 <span class="preprocessor">#if 0</span>
00065 <span class="preprocessor"></span>}
00066 <span class="preprocessor">#endif</span>
00067 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00068 <span class="preprocessor"></span>
00069 <span class="comment">/* $Id: tdsodbc.h,v 1.103.2.1 2008/01/27 10:41:22 freddy77 Exp $ */</span>
00070 
00071 <span class="preprocessor">#if defined(__GNUC__) &amp;&amp; __GNUC__ &gt;= 4</span>
00072 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC visibility push(hidden)</span>
00073 <span class="preprocessor"></span><span class="preprocessor">#define ODBC_API SQL_API __attribute__((externally_visible))</span>
00074 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00075 <span class="preprocessor"></span><span class="preprocessor">#define ODBC_API SQL_API</span>
00076 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00077 <span class="preprocessor"></span>
00078 <span class="preprocessor">#define ODBC_MAX(a,b) ( (a) &gt; (b) ? (a) : (b) )</span>
00079 <span class="preprocessor"></span><span class="preprocessor">#define ODBC_MIN(a,b) ( (a) &lt; (b) ? (a) : (b) )</span>
00080 <span class="preprocessor"></span>
00081 <span class="keyword">struct </span>_sql_error
00082 {
00083         <span class="keyword">const</span> <span class="keywordtype">char</span> *msg;
00084         <span class="keywordtype">char</span> state2[6];
00085         <span class="keywordtype">char</span> state3[6];
00086         TDS_UINT native;
00087         <span class="keywordtype">char</span> *server;
00088         <span class="keywordtype">int</span> linenum;
00089         <span class="keywordtype">int</span> msgstate;
00090 };
00091 
00092 <span class="keyword">struct </span>_sql_errors
00093 {
00094         SQLRETURN lastrc;
00095         <span class="keywordtype">int</span> num_errors;
00096         <span class="keyword">struct </span>_sql_error *errs;
00097         <span class="keywordtype">char</span> ranked;
00098 };
00099 
00100 <span class="preprocessor">#if ENABLE_EXTRA_CHECKS</span>
00101 <span class="preprocessor"></span><span class="keywordtype">void</span> odbc_check_struct_extra(<span class="keywordtype">void</span> *p);
00102 
00103 <span class="preprocessor">#define ODBC_RETURN(handle, rc) \</span>
00104 <span class="preprocessor">        do { odbc_check_struct_extra(handle); return (handle-&gt;errs.lastrc = (rc)); } while(0)</span>
00105 <span class="preprocessor"></span><span class="preprocessor">#define ODBC_RETURN_(handle) \</span>
00106 <span class="preprocessor">        do { odbc_check_struct_extra(handle); return handle-&gt;errs.lastrc; } while(0)</span>
00107 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00108 <span class="preprocessor"></span><span class="preprocessor">#define ODBC_RETURN(handle, rc) \</span>
00109 <span class="preprocessor">        do { return (handle-&gt;errs.lastrc = (rc)); } while(0)</span>
00110 <span class="preprocessor"></span><span class="preprocessor">#define ODBC_RETURN_(handle) \</span>
00111 <span class="preprocessor">        do { return handle-&gt;errs.lastrc; } while(0)</span>
00112 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00113 <span class="preprocessor"></span>
00115 <span class="keywordtype">void</span> odbc_errs_reset(<span class="keyword">struct</span> _sql_errors *errs);
00116 
00118 <span class="keywordtype">void</span> odbc_errs_add(<span class="keyword">struct</span> _sql_errors *errs, <span class="keyword">const</span> <span class="keywordtype">char</span> *sqlstate, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg);
00119 
00121 <span class="keywordtype">void</span> odbc_errs_add_rdbms(<span class="keyword">struct</span> _sql_errors *errs, TDS_UINT native, <span class="keyword">const</span> <span class="keywordtype">char</span> *sqlstate, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg, <span class="keywordtype">int</span> linenum,
00122                          <span class="keywordtype">int</span> msgstate, <span class="keyword">const</span> <span class="keywordtype">char</span> *server);
00123 
00124 <span class="keyword">struct </span>_dheader
00125 {
00126         SQLSMALLINT sql_desc_alloc_type;
00127         SQLINTEGER sql_desc_bind_type;
00128         SQLULEN sql_desc_array_size;
00129         <span class="comment">/* TODO SQLLEN ?? see http://support.microsoft.com/default.aspx?scid=kb;en-us;298678 */</span>
00130         SQLSMALLINT sql_desc_count;
00131         SQLUSMALLINT *sql_desc_array_status_ptr;
00132         SQLULEN *sql_desc_rows_processed_ptr;
00133         SQLLEN *sql_desc_bind_offset_ptr;
00134 };
00135 
00136 <span class="keyword">struct </span>_drecord
00137 {
00138         SQLUINTEGER sql_desc_auto_unique_value;
00139         DSTR sql_desc_base_column_name;
00140         DSTR sql_desc_base_table_name;
00141         SQLINTEGER sql_desc_case_sensitive;
00142         DSTR sql_desc_catalog_name;
00143         SQLSMALLINT sql_desc_concise_type;
00144         SQLPOINTER sql_desc_data_ptr;
00145         SQLSMALLINT sql_desc_datetime_interval_code;
00146         SQLINTEGER sql_desc_datetime_interval_precision;
00147         SQLLEN sql_desc_display_size;
00148         SQLSMALLINT sql_desc_fixed_prec_scale;
00149         SQLLEN *sql_desc_indicator_ptr;
00150         DSTR sql_desc_label;
00151         SQLULEN sql_desc_length;
00152         <span class="comment">/* this point to a constant buffer, do not free or modify */</span>
00153         <span class="keyword">const</span> <span class="keywordtype">char</span> *sql_desc_literal_prefix;
00154         <span class="comment">/* this point to a constant buffer, do not free or modify */</span>
00155         <span class="keyword">const</span> <span class="keywordtype">char</span> *sql_desc_literal_suffix;
00156         DSTR sql_desc_local_type_name;
00157         DSTR sql_desc_name;
00158         SQLSMALLINT sql_desc_nullable;
00159         SQLINTEGER sql_desc_num_prec_radix;
00160         SQLLEN sql_desc_octet_length;
00161         SQLLEN *sql_desc_octet_length_ptr;
00162         SQLSMALLINT sql_desc_parameter_type;
00163         SQLSMALLINT sql_desc_precision;
00164         SQLSMALLINT sql_desc_rowver;
00165         SQLSMALLINT sql_desc_scale;
00166         DSTR sql_desc_schema_name;
00167         SQLSMALLINT sql_desc_searchable;
00168         DSTR sql_desc_table_name;
00169         SQLSMALLINT sql_desc_type;
00170         <span class="comment">/* this point to a constant buffer, do not free or modify */</span>
00171         <span class="keyword">const</span> <span class="keywordtype">char</span> *sql_desc_type_name;
00172         SQLSMALLINT sql_desc_unnamed;
00173         SQLSMALLINT sql_desc_unsigned;
00174         SQLSMALLINT sql_desc_updatable;
00175 };
00176 
00177 <span class="keyword">struct </span>_hdesc
00178 {
00179         SQLSMALLINT htype;      <span class="comment">/* do not reorder this field */</span>
00180         <span class="keywordtype">int</span> type;
00181         SQLHANDLE parent;
00182         <span class="keyword">struct </span>_dheader header;
00183         <span class="keyword">struct </span>_drecord *records;
00184         <span class="keyword">struct </span>_sql_errors errs;
00185 };
00186 
00187 <span class="keyword">typedef</span> <span class="keyword">struct </span>_hdesc TDS_DESC;
00188 
00189 <span class="preprocessor">#define DESC_IRD        1</span>
00190 <span class="preprocessor"></span><span class="preprocessor">#define DESC_IPD        2</span>
00191 <span class="preprocessor"></span><span class="preprocessor">#define DESC_ARD        3</span>
00192 <span class="preprocessor"></span><span class="preprocessor">#define DESC_APD        4</span>
00193 <span class="preprocessor"></span>
00194 <span class="keyword">struct </span>_heattr
00195 {
00196         SQLUINTEGER connection_pooling;
00197         SQLUINTEGER cp_match;
00198         SQLINTEGER odbc_version;
00199         SQLINTEGER output_nts;
00200 };
00201 
00202 <span class="keyword">struct </span>_hchk
00203 {
00204         SQLSMALLINT htype;      <span class="comment">/* do not reorder this field */</span>
00205 };
00206 
00207 <span class="keyword">struct </span>_henv
00208 {
00209         SQLSMALLINT htype;      <span class="comment">/* do not reorder this field */</span>
00210         TDSCONTEXT *tds_ctx;
00211         <span class="keyword">struct </span>_sql_errors errs;
00212         <span class="keyword">struct </span>_heattr attr;
00213 };
00214 
00215 <span class="keyword">struct </span>_hcattr
00216 {
00217         SQLUINTEGER access_mode;
00218         SQLUINTEGER async_enable;
00219         SQLUINTEGER auto_ipd;
00220         SQLUINTEGER autocommit;
00221         SQLUINTEGER connection_dead;
00222         SQLUINTEGER connection_timeout;
00223         DSTR current_catalog;
00224         SQLUINTEGER login_timeout;
00225         SQLUINTEGER metadata_id;
00226         SQLUINTEGER odbc_cursors;
00227         SQLUINTEGER packet_size;
00228         SQLHWND quite_mode;
00229         DSTR translate_lib;
00230         SQLUINTEGER translate_option;
00231         SQLUINTEGER txn_isolation;
00232         SQLUINTEGER cursor_type;
00233 <span class="preprocessor">#ifdef TDS_NO_DM</span>
00234 <span class="preprocessor"></span>        SQLUINTEGER trace;
00235         DSTR tracefile;
00236 <span class="preprocessor">#endif</span>
00237 <span class="preprocessor"></span>};
00238 
00239 <span class="preprocessor">#define TDS_MAX_APP_DESC        100</span>
00240 <span class="preprocessor"></span>
00241 <span class="keyword">struct </span>_hstmt;
00242 <span class="keyword">struct </span>_hdbc
00243 {
00244         SQLSMALLINT htype;      <span class="comment">/* do not reorder this field */</span>
00245         <span class="keyword">struct </span>_henv *env;
00246         <a class="code" href="a00144.html">TDSSOCKET</a> *<a class="code" href="a00144.html">tds_socket</a>;
00247         DSTR dsn;
00248         DSTR server;            <span class="comment">/* aka Instance */</span>
00254         <span class="keyword">struct </span>_hstmt *current_statement;
00256         <span class="keyword">struct </span>_hstmt *stmt_list;
00257         <span class="keyword">struct </span>_sql_errors errs;
00258         <span class="keyword">struct </span>_hcattr attr;
00260         TDS_DESC *uad[TDS_MAX_APP_DESC];
00262         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cursor_support;
00263         TDS_INT default_query_timeout;
00264 };
00265 
00266 <span class="keyword">struct </span>_hsattr
00267 {
00268         <span class="comment">/* TODO remove IRD, ARD, IPD, APD from statement, do not duplicate */</span>
00269 <span class="comment">/*      TDS_DESC *app_row_desc; */</span>
00270 <span class="comment">/*      TDS_DESC *app_param_desc; */</span>
00271         SQLUINTEGER async_enable;
00272         SQLUINTEGER concurrency;
00273         SQLUINTEGER cursor_scrollable;
00274         SQLUINTEGER cursor_sensitivity;
00275         SQLUINTEGER cursor_type;
00276         SQLUINTEGER enable_auto_ipd;
00277         SQLPOINTER fetch_bookmark_ptr;
00278         SQLULEN keyset_size;
00279         SQLULEN max_length;
00280         SQLULEN max_rows;
00281         SQLUINTEGER metadata_id;
00282         SQLUINTEGER noscan;
00283         <span class="comment">/* apd-&gt;sql_desc_bind_offset_ptr */</span>
00284         <span class="comment">/* SQLUINTEGER *param_bind_offset_ptr; */</span>
00285         <span class="comment">/* apd-&gt;sql_desc_bind_type */</span>
00286         <span class="comment">/* SQLUINTEGER param_bind_type; */</span>
00287         <span class="comment">/* apd-&gt;sql_desc_array_status_ptr */</span>
00288         <span class="comment">/* SQLUSMALLINT *param_operation_ptr; */</span>
00289         <span class="comment">/* ipd-&gt;sql_desc_array_status_ptr */</span>
00290         <span class="comment">/* SQLUSMALLINT *param_status_ptr; */</span>
00291         <span class="comment">/* ipd-&gt;sql_desc_rows_processed_ptr */</span>
00292         <span class="comment">/* SQLUSMALLINT *params_processed_ptr; */</span>
00293         <span class="comment">/* apd-&gt;sql_desc_array_size */</span>
00294         <span class="comment">/* SQLUINTEGER paramset_size; */</span>
00295         SQLUINTEGER query_timeout;
00296         SQLUINTEGER retrieve_data;
00297         <span class="comment">/* ard-&gt;sql_desc_bind_offset_ptr */</span>
00298         <span class="comment">/* SQLUINTEGER *row_bind_offset_ptr; */</span>
00299         <span class="comment">/* ard-&gt;sql_desc_array_size */</span>
00300         <span class="comment">/* SQLUINTEGER row_array_size; */</span>
00301         <span class="comment">/* ard-&gt;sql_desc_bind_type */</span>
00302         <span class="comment">/* SQLUINTEGER row_bind_type; */</span>
00303         SQLULEN row_number;
00304         <span class="comment">/* ard-&gt;sql_desc_array_status_ptr */</span>
00305         <span class="comment">/* SQLUINTEGER *row_operation_ptr; */</span>
00306         <span class="comment">/* ird-&gt;sql_desc_array_status_ptr */</span>
00307         <span class="comment">/* SQLUINTEGER *row_status_ptr; */</span>
00308         <span class="comment">/* ird-&gt;sql_desc_rows_processed_ptr */</span>
00309         <span class="comment">/* SQLUINTEGER *rows_fetched_ptr; */</span>
00310         SQLUINTEGER simulate_cursor;
00311         SQLUINTEGER use_bookmarks;
00312         <span class="comment">/* SQLGetStmtAttr only */</span>
00313 <span class="comment">/*      TDS_DESC *imp_row_desc; */</span>
00314 <span class="comment">/*      TDS_DESC *imp_param_desc; */</span>
00315 };
00316 
00317 <span class="keyword">typedef</span> <span class="keyword">enum</span>
00318 {
00319         NOT_IN_ROW,
00320         IN_NORMAL_ROW,
00321         IN_COMPUTE_ROW,
00322         AFTER_COMPUTE_ROW,
00323         PRE_NORMAL_ROW
00324 } TDS_ODBC_ROW_STATUS;
00325 
00326 <span class="keyword">struct </span>_hstmt
00327 {
00328         SQLSMALLINT htype;      <span class="comment">/* do not reorder this field */</span>
00329         <span class="keyword">struct </span>_hdbc *dbc;
00331         <span class="keywordtype">char</span> *query;
00332 
00334         <span class="keyword">struct </span>_hstmt *next;
00336         <span class="keyword">struct </span>_hstmt *prev;
00337 
00338         <span class="comment">/* begin prepared query stuff */</span>
00339         <span class="keywordtype">char</span> *prepared_query;
00340         <span class="keywordtype">unsigned</span> prepared_query_is_func:1;
00341         <span class="keywordtype">unsigned</span> prepared_query_is_rpc:1;
00342         <span class="keywordtype">unsigned</span> need_reprepare:1;
00343         <span class="keywordtype">unsigned</span> param_data_called:1;
00344         <span class="comment">/* end prepared query stuff */</span>
00345 
00347         <a class="code" href="a00143.html">TDSPARAMINFO</a> *params;
00349         <span class="keywordtype">int</span> param_num;
00351         <span class="keywordtype">char</span> *prepared_pos;
00352 
00353         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> curr_param_row, num_param_rows;
00354 
00356         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> param_count;
00357         <span class="keywordtype">int</span> row;
00359         TDS_INT8 row_count;
00361         TDS_ODBC_ROW_STATUS row_status;
00362         <span class="comment">/* do NOT free dynamic, free from socket or attach to connection */</span>
00363         <a class="code" href="a00141.html">TDSDYNAMIC</a> *dyn;
00364         <span class="keyword">struct </span>_sql_errors errs;
00365         TDS_DESC *ard, *ird, *apd, *ipd;
00366         TDS_DESC *orig_ard, *orig_apd;
00367         SQLULEN sql_rowset_size;
00368         <span class="keyword">struct </span>_hsattr attr;
00369         DSTR cursor_name;       <span class="comment">/* auto generated cursor name */</span>
00370         <span class="keywordtype">int</span> special_row;
00371         <span class="comment">/* do NOT free cursor, free from socket or attach to connection */</span>
00372         <a class="code" href="a00135.html">TDSCURSOR</a> *cursor;
00373         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cancel_sent;
00374 };
00375 
00376 <span class="keyword">typedef</span> <span class="keyword">struct </span>_henv TDS_ENV;
00377 <span class="keyword">typedef</span> <span class="keyword">struct </span>_hdbc TDS_DBC;
00378 <span class="keyword">typedef</span> <span class="keyword">struct </span>_hstmt TDS_STMT;
00379 <span class="keyword">typedef</span> <span class="keyword">struct </span>_hchk TDS_CHK;
00380 
00381 <span class="preprocessor">#define IS_HENV(x) (((TDS_CHK *)x)-&gt;htype == SQL_HANDLE_ENV)</span>
00382 <span class="preprocessor"></span><span class="preprocessor">#define IS_HDBC(x) (((TDS_CHK *)x)-&gt;htype == SQL_HANDLE_DBC)</span>
00383 <span class="preprocessor"></span><span class="preprocessor">#define IS_HSTMT(x) (((TDS_CHK *)x)-&gt;htype == SQL_HANDLE_STMT)</span>
00384 <span class="preprocessor"></span><span class="preprocessor">#define IS_HDESC(x) (((TDS_CHK *)x)-&gt;htype == SQL_HANDLE_DESC)</span>
00385 <span class="preprocessor"></span>
00386 <span class="comment">/* fix a bug in MingW headers */</span>
00387 <span class="preprocessor">#ifdef __MINGW32__</span>
00388 <span class="preprocessor"></span><span class="preprocessor">#if SQL_INTERVAL_YEAR == (100 + SQL_CODE_SECOND)</span>
00389 <span class="preprocessor"></span>
00390 <span class="preprocessor">#undef SQL_INTERVAL_YEAR</span>
00391 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_MONTH</span>
00392 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_DAY</span>
00393 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_HOUR</span>
00394 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_MINUTE</span>
00395 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_SECOND</span>
00396 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_YEAR_TO_MONTH</span>
00397 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_DAY_TO_HOUR</span>
00398 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_DAY_TO_MINUTE</span>
00399 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_DAY_TO_SECOND</span>
00400 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_HOUR_TO_MINUTE</span>
00401 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_HOUR_TO_SECOND</span>
00402 <span class="preprocessor"></span><span class="preprocessor">#undef SQL_INTERVAL_MINUTE_TO_SECOND</span>
00403 <span class="preprocessor"></span>
00404 <span class="preprocessor">#define SQL_INTERVAL_YEAR                                       (100 + SQL_CODE_YEAR)</span>
00405 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_MONTH                                      (100 + SQL_CODE_MONTH)</span>
00406 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_DAY                                        (100 + SQL_CODE_DAY)</span>
00407 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_HOUR                                       (100 + SQL_CODE_HOUR)</span>
00408 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_MINUTE                                     (100 + SQL_CODE_MINUTE)</span>
00409 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_SECOND                     (100 + SQL_CODE_SECOND)</span>
00410 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_YEAR_TO_MONTH                      (100 + SQL_CODE_YEAR_TO_MONTH)</span>
00411 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_DAY_TO_HOUR                        (100 + SQL_CODE_DAY_TO_HOUR)</span>
00412 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_DAY_TO_MINUTE                      (100 + SQL_CODE_DAY_TO_MINUTE)</span>
00413 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_DAY_TO_SECOND                      (100 + SQL_CODE_DAY_TO_SECOND)</span>
00414 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_HOUR_TO_MINUTE                     (100 + SQL_CODE_HOUR_TO_MINUTE)</span>
00415 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_HOUR_TO_SECOND                     (100 + SQL_CODE_HOUR_TO_SECOND)</span>
00416 <span class="preprocessor"></span><span class="preprocessor">#define SQL_INTERVAL_MINUTE_TO_SECOND           (100 + SQL_CODE_MINUTE_TO_SECOND)</span>
00417 <span class="preprocessor"></span>
00418 <span class="preprocessor">#endif</span>
00419 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00420 <span class="preprocessor"></span>
00421 <span class="preprocessor">#ifdef WIN32</span>
00422 <span class="preprocessor"></span>BOOL get_login_info(HWND hwndParent, TDSCONNECTION * connection);
00423 <span class="preprocessor">#endif</span>
00424 <span class="preprocessor"></span>
00425 <span class="comment">/*</span>
00426 <span class="comment"> * connectparams.h</span>
00427 <span class="comment"> */</span>
00435 <span class="keywordtype">int</span> odbc_parse_connect_string(<span class="keyword">const</span> <span class="keywordtype">char</span> *connect_string, <span class="keyword">const</span> <span class="keywordtype">char</span> *connect_string_end, TDSCONNECTION * connection);
00436 <span class="keywordtype">int</span> odbc_get_dsn_info(<span class="keyword">const</span> <span class="keywordtype">char</span> *DSN, TDSCONNECTION * connection);
00437 
00438 <span class="comment">/*</span>
00439 <span class="comment"> * convert_tds2sql.c</span>
00440 <span class="comment"> */</span>
00441 TDS_INT convert_tds2sql(TDSCONTEXT * context, <span class="keywordtype">int</span> srctype, TDS_CHAR * src, TDS_UINT srclen, <span class="keywordtype">int</span> desttype, TDS_CHAR * dest, SQLULEN destlen, <span class="keyword">const</span> <span class="keyword">struct</span> _drecord *drec_ixd);
00442 
00443 <span class="comment">/*</span>
00444 <span class="comment"> * descriptor.c</span>
00445 <span class="comment"> */</span>
00446 TDS_DESC *desc_alloc(SQLHANDLE parent, <span class="keywordtype">int</span> desc_type, <span class="keywordtype">int</span> alloc_type);
00447 SQLRETURN desc_free(TDS_DESC * desc);
00448 SQLRETURN desc_alloc_records(TDS_DESC * desc, <span class="keywordtype">unsigned</span> count);
00449 SQLRETURN desc_copy(TDS_DESC * dest, TDS_DESC * src);
00450 SQLRETURN desc_free_records(TDS_DESC * desc);
00451 
00452 <span class="comment">/*</span>
00453 <span class="comment"> * odbc.c</span>
00454 <span class="comment"> */</span>
00455 SQLRETURN _SQLRowCount(SQLHSTMT hstmt, SQLLEN FAR * pcrow);
00456 
00457 <span class="comment">/*</span>
00458 <span class="comment"> * odbc_checks.h</span>
00459 <span class="comment"> */</span>
00460 <span class="preprocessor">#if ENABLE_EXTRA_CHECKS</span>
00461 <span class="preprocessor"></span><span class="comment">/* macro */</span>
00462 <span class="preprocessor">#define CHECK_ENV_EXTRA(env) odbc_check_env_extra(env)</span>
00463 <span class="preprocessor"></span><span class="preprocessor">#define CHECK_DBC_EXTRA(dbc) odbc_check_dbc_extra(dbc)</span>
00464 <span class="preprocessor"></span><span class="preprocessor">#define CHECK_STMT_EXTRA(stmt) odbc_check_stmt_extra(stmt)</span>
00465 <span class="preprocessor"></span><span class="preprocessor">#define CHECK_DESC_EXTRA(desc) odbc_check_desc_extra(desc)</span>
00466 <span class="preprocessor"></span><span class="comment">/* declarations*/</span>
00467 <span class="keywordtype">void</span> odbc_check_env_extra(TDS_ENV * env);
00468 <span class="keywordtype">void</span> odbc_check_dbc_extra(TDS_DBC * dbc);
00469 <span class="keywordtype">void</span> odbc_check_stmt_extra(TDS_STMT * stmt);
00470 <span class="keywordtype">void</span> odbc_check_desc_extra(TDS_DESC * desc);
00471 <span class="preprocessor">#else</span>
00472 <span class="preprocessor"></span><span class="comment">/* macro */</span>
00473 <span class="preprocessor">#define CHECK_ENV_EXTRA(env)</span>
00474 <span class="preprocessor"></span><span class="preprocessor">#define CHECK_DBC_EXTRA(dbc)</span>
00475 <span class="preprocessor"></span><span class="preprocessor">#define CHECK_STMT_EXTRA(stmt)</span>
00476 <span class="preprocessor"></span><span class="preprocessor">#define CHECK_DESC_EXTRA(desc)</span>
00477 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00478 <span class="preprocessor"></span>
00479 <span class="comment">/*</span>
00480 <span class="comment"> * odbc_util.h</span>
00481 <span class="comment"> */</span>
00482 <span class="keywordtype">int</span> odbc_set_stmt_query(<span class="keyword">struct</span> _hstmt *stmt, <span class="keyword">const</span> <span class="keywordtype">char</span> *sql, <span class="keywordtype">int</span> sql_len);
00483 <span class="keywordtype">int</span> odbc_set_stmt_prepared_query(<span class="keyword">struct</span> _hstmt *stmt, <span class="keyword">const</span> <span class="keywordtype">char</span> *sql, <span class="keywordtype">int</span> sql_len);
00484 <span class="keywordtype">void</span> odbc_set_return_status(<span class="keyword">struct</span> _hstmt *stmt, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_row);
00485 <span class="keywordtype">void</span> odbc_set_return_params(<span class="keyword">struct</span> _hstmt *stmt, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_row);
00486 
00487 SQLSMALLINT <a class="code" href="a00284.html#ga6">odbc_server_to_sql_type</a>(<span class="keywordtype">int</span> col_type, <span class="keywordtype">int</span> col_size);
00488 <span class="keywordtype">int</span> odbc_sql_to_c_type_default(<span class="keywordtype">int</span> sql_type);
00489 <span class="keywordtype">int</span> odbc_sql_to_server_type(<a class="code" href="a00144.html">TDSSOCKET</a> * tds, <span class="keywordtype">int</span> sql_type);
00490 <span class="keywordtype">int</span> <a class="code" href="a00284.html#ga7">odbc_c_to_server_type</a>(<span class="keywordtype">int</span> c_type);
00491 
00492 <span class="keywordtype">void</span> odbc_set_sql_type_info(<a class="code" href="a00140.html">TDSCOLUMN</a> * col, <span class="keyword">struct</span> _drecord *drec, SQLINTEGER odbc_ver);
00493 SQLINTEGER odbc_sql_to_displaysize(<span class="keywordtype">int</span> sqltype, <a class="code" href="a00140.html">TDSCOLUMN</a> *col);
00494 <span class="keywordtype">int</span> odbc_get_string_size(<span class="keywordtype">int</span> size, SQLCHAR * str);
00495 <span class="keywordtype">void</span> <a class="code" href="a00284.html#ga14">odbc_rdbms_version</a>(<a class="code" href="a00144.html">TDSSOCKET</a> * <a class="code" href="a00144.html">tds_socket</a>, <span class="keywordtype">char</span> *pversion_string);
00496 SQLINTEGER <a class="code" href="a00284.html#ga15">odbc_get_param_len</a>(<span class="keyword">const</span> <span class="keyword">struct</span> _drecord *drec_axd, <span class="keyword">const</span> <span class="keyword">struct</span> _drecord *drec_ixd, <span class="keyword">const</span> TDS_DESC* axd, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_row);
00497 
00498 SQLRETURN <a class="code" href="a00284.html#ga12">odbc_set_string</a>(SQLPOINTER buffer, SQLSMALLINT cbBuffer, SQLSMALLINT FAR * pcbBuffer, <span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> len);
00499 SQLRETURN odbc_set_string_i(SQLPOINTER buffer, SQLINTEGER cbBuffer, SQLINTEGER FAR * pcbBuffer, <span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> len);
00500 
00501 SQLSMALLINT odbc_get_concise_sql_type(SQLSMALLINT type, SQLSMALLINT interval);
00502 SQLRETURN <a class="code" href="a00284.html#ga17">odbc_set_concise_sql_type</a>(SQLSMALLINT concise_type, <span class="keyword">struct</span> _drecord *drec, <span class="keywordtype">int</span> check_only);
00503 SQLSMALLINT odbc_get_concise_c_type(SQLSMALLINT type, SQLSMALLINT interval);
00504 SQLRETURN <a class="code" href="a00284.html#ga19">odbc_set_concise_c_type</a>(SQLSMALLINT concise_type, <span class="keyword">struct</span> _drecord *drec, <span class="keywordtype">int</span> check_only);
00505 
00506 SQLLEN odbc_get_octet_len(<span class="keywordtype">int</span> c_type, <span class="keyword">const</span> <span class="keyword">struct</span> _drecord *drec);
00507 
00508 <span class="comment">/*</span>
00509 <span class="comment"> * prepare_query.c</span>
00510 <span class="comment"> */</span>
00511 SQLRETURN prepare_call(<span class="keyword">struct</span> _hstmt *stmt);
00512 SQLRETURN native_sql(<span class="keyword">struct</span> _hdbc *dbc, <span class="keywordtype">char</span> *s);
00513 <span class="keywordtype">int</span> parse_prepared_query(<span class="keyword">struct</span> _hstmt *stmt, <span class="keywordtype">int</span> compute_row);
00514 <span class="keywordtype">int</span> start_parse_prepared_query(<span class="keyword">struct</span> _hstmt *stmt, <span class="keywordtype">int</span> compute_row);
00515 <span class="keywordtype">int</span> continue_parse_prepared_query(<span class="keyword">struct</span> _hstmt *stmt, SQLPOINTER DataPtr, SQLLEN StrLen_or_Ind);
00516 <span class="keyword">const</span> <span class="keywordtype">char</span> *parse_const_param(<span class="keyword">const</span> <span class="keywordtype">char</span> * s, TDS_SERVER_TYPE *type);
00517 
00518 <span class="comment">/*</span>
00519 <span class="comment"> * sql2tds.c</span>
00520 <span class="comment"> */</span>
00521 SQLRETURN sql2tds(TDS_STMT * stmt, <span class="keyword">const</span> <span class="keyword">struct</span> _drecord *drec_ixd, <span class="keyword">const</span> <span class="keyword">struct</span> _drecord *drec_axd, <a class="code" href="a00140.html">TDSCOLUMN</a> *curcol, <span class="keywordtype">int</span> compute_row, <span class="keyword">const</span> TDS_DESC* axd, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n_row);
00522 
00523 <span class="preprocessor">#if defined(__GNUC__) &amp;&amp; __GNUC__ &gt;= 4</span>
00524 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC visibility pop</span>
00525 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00526 <span class="preprocessor"></span>
00527 <span class="preprocessor">#ifdef __cplusplus</span>
00528 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
00529 <span class="preprocessor"></span>{
00530 <span class="preprocessor">#endif</span>
00531 <span class="preprocessor"></span>}
00532 <span class="preprocessor">#endif</span>
00533 <span class="preprocessor"></span>
00534 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed May 7 19:22:09 2008 for FreeTDS API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.1 </small></address>
</body>
</html>
