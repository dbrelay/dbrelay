<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Viaduct JavaScript Documentation</title>

	<link rel="stylesheet" href="doc.css" type="text/css"/>                                                                                                                             

	  
  <style type="text/css">
<!--
.em {        font-variant: small-caps;
        font-weight: bold;
}
.todo {        border: 1px solid #F9DB58;
}
.ab {        font-style: italic;
        font-variant: small-caps;
}
.json_term {        text-decoration: underline;
}
.indent {        padding: 0em 1.5em;
        display: block;
}
.spec {        font-family: monospaced;
        margin-left: 10em;
}
ul.dense {        pagging-top: 0;
        pagging-bottom: 0;
        margin-top: 0;
        margin-bottom: 0;
}
ul.dense1 {        pagging-top: 0;
        pagging-bottom: 0;
        margin-top: 0;
        margin-bottom: 0;
}
ul.dense2 {        pagging-top: 0;
        pagging-bottom: 0;
        margin-top: 0;
        margin-bottom: 0;
}
-->
  </style>
  </head>
	
	
	<body>
		<div id="page"> 
			<h1>Example</h1>
			<p>The following is a Viaduct query example from client-side JavaScript. The example uses the <code>$.post()</code> function from external <code>jQuery</code> library to implement the AJAX post. It executes three asynchronous data retrievals at the end of the script. Queries&#x27; tags simply pop up on completion with an <code>alert()</code> function.</p><pre class="codeblock">&lt;script type="text/javascript" src="jquery-1.2.6.pack.js">&lt;/script>
&lt;script type="text/javascript" charset="utf-8">

  // query function - will be included in external library
  function viaductQuery( viaduct, connection, sql, callback, tag) {
    connection[ "sql" ] = sql;
    if ( tag !== undefined ) connection[ "query_tag" ] = tag;
    $.post( viaduct, connection, callback, "json");
  };

  // connectivity setup
  var viaduct = "http://viaduct/sql";
  var sql_conn = {
    sql_server : "dbserver",
    sql_user   : "public"
  };

  // callback function
  function gotResponse( response ) {
    alert( 'The "' + response.request.query_tag + '" query has just returned.' );
  };

  // run the queries
  viaductQuery( viaduct, sql_conn, "exec ExampleProc1", gotResponse, "First" );
  viaductQuery( viaduct, sql_conn, "exec ExampleProc2", gotResponse, "Second" );
  viaductQuery( viaduct, sql_conn, "exec ExampleProc3", gotResponse, "Third" );

&lt;/script></pre></p>
		  <p>&nbsp;</p>
<p>&nbsp;</p>
        </div>
		
		
		
  </body>
</html>           




