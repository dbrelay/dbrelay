<div class="body-wrap" xmlns:ext="http://www.extjs.com"><div class="top-tools"><a class="inner-link" href="#DbRelay.TableHelper-props"><img src="resources/images/default/s.gif" class="item-icon icon-prop">Properties</a>&#13;<a class="inner-link" href="#DbRelay.TableHelper-methods"><img src="resources/images/default/s.gif" class="item-icon icon-method">Methods</a>&#13;<a class="inner-link" href="#DbRelay.TableHelper-events"><img src="resources/images/default/s.gif" class="item-icon icon-event">Events</a>&#13;<a class="inner-link" href="#DbRelay.TableHelper-configs"><img src="resources/images/default/s.gif" class="item-icon icon-config">Config Options</a>&#13;<a class="bookmark" href="../docs/?class=DbRelay.TableHelper"><img src="resources/images/default/s.gif" class="item-icon icon-fav">Direct Link</a>&#13;</div><h1>Class <a href="source/sqlTable.html#cls-DbRelay.TableHelper">DbRelay.TableHelper</a></h1><table cellspacing="0"><tr><td class="label">Package:</td><td class="hd-info">DbRelay</td></tr><tr><td class="label">Defined In:</td><td class="hd-info"><a href="source/sqlTable.html#cls-DbRelay.TableHelper">sqlTable.js</a></td></tr><tr><td class="label">Class:</td><td class="hd-info"><a href="source/sqlTable.html#cls-DbRelay.TableHelper">TableHelper</a></td></tr><tr><td class="label">Extends:</td><td class="hd-info">Object</td></tr></table><div class="description">An API to perform SQL queries on a single table. Usage:

<pre>
/* Create a new <a href="output/DbRelay.QueryHelper.html" ext:cls="DbRelay.QueryHelper">DbRelay.QueryHelper</a> instance for our database connection information *\/ 
var qh = new DbRelay.QueryHelper({   

	//Hostname on which the SQL server is running. 
	sql_server : '99.99.99.99.99', 

	//Optional port number, on which the SQL server is listening. 1433 is the default.
	sql_port : '',  
	//Optional name of the primary database for the connection. User's default database is used, if not specified.
	sql_database : 'mydatabase', 

	//Username string recognised by the SQL server.   
	sql_user : 'myuser',                

	//password for the sql_user.   
	sql_password : 'mypass',              

	//Optional name to persist this connection under.   
	connection_name : 'example2',  

	/*Optional number of seconds from the response to the last query before the connection will be considered idle 
	and marked for destroying. The default is 60. The silently enforced maximum connection lifespan is 28800 (8 hours). *\/   
	connection_timeout : 60,
	
	
	/*Optional parameter for xss scripting.  Leave out for same-domain scripts  *\/   
	dbrelay_host : 'http://dbrelay_host'
});	

//Create an sqlTable for the table 'people', using the above QueryHelper   
var myTable = new DbRelay.TableHelper('people', qh);
</pre></div><div class="hr"></div><a id="DbRelay.TableHelper-configs"></a><h2>Config Options</h2><table cellspacing="0" class="member-table"><tbody><tr><th colspan="2" class="sig-header">Config Options</th><th class="msource-header">Defined By</th></tr><tr class="config-row  "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-pkeys"></a><b><a href="source/sqlTable.html#cfg-DbRelay.TableHelper-pkeys">pkeys</a></b> : string<div class="mdesc">:</div></td><td class="msource">TableHelper</td></tr></tbody></table><a id="DbRelay.TableHelper-props"></a><h2>Public Properties</h2><div class="no-members">This class has no public properties.</div><a id="DbRelay.TableHelper-methods"></a><h2>Public Methods</h2><table cellspacing="0" class="member-table"><tbody><tr><th colspan="2" class="sig-header">Method</th><th class="msource-header">Defined By</th></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-TableHelper"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-TableHelper">TableHelper</a></b>(&nbsp;<code>string&nbsp;table</code>,&nbsp;<code>Object/DbRelay.QueryHelper&nbsp;queryHelper</code>&nbsp;)
    :
                                        void<div class="mdesc"><div class="short"></div><div class="long"><div class="mdetail-params"><strong>Parameters:</strong><ul><li><code>table</code> : string<div class="sub-desc">table name</div></li><li><code>queryHelper</code> : Object/DbRelay.QueryHelper<div class="sub-desc">Either the connection parameters for the db OR an instance of a DbRelay.QueryHelper</div></li></ul><strong>Returns:</strong><ul><li>void</li></ul></div></div></div></td><td class="msource">TableHelper</td></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-addRows"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-addRows">addRows</a></b>(&nbsp;<code>Object&nbsp;rows</code>,&nbsp;<code>function&nbsp;callback</code>,&nbsp;<code>Object&nbsp;scope</code>&nbsp;)
    :
                                        void<div class="mdesc"><div class="short">adds new rows to table</div><div class="long">adds new rows to table<div class="mdetail-params"><strong>Parameters:</strong><ul><li><code>rows</code> : Object<div class="sub-desc">column_key/values to add</div></li><li><code>callback</code> : function<div class="sub-desc">function that will be called if the query finishes. Called with the following parameters:<ul class="mdetail-params">
			     <li><b>this</b> : <a href="output/DbRelay.TableHelper.html" ext:cls="DbRelay.TableHelper">DbRelay.TableHelper</a><div class="sub-desc">the DbRelay.TableHelper object</div></li>
					 <li><b>response</b> : Object<div class="sub-desc">the raw DbRelay response object</div></li>
			 </ul></div></li><li><code>scope</code> : Object<div class="sub-desc">: scope of callback function (defaults to global scope)</div></li></ul><strong>Returns:</strong><ul><li>void</li></ul></div></div></div></td><td class="msource">TableHelper</td></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-applyProperties"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-applyProperties">applyProperties</a></b>(&nbsp;<code>Object&nbsp;dest</code>,&nbsp;<code>Object&nbsp;src</code>,&nbsp;<code>bool&nbsp;overwrite</code>&nbsp;)
    :
                                        void<div class="mdesc"><div class="short">util - copies all properties of one object to another, one level deep with optional overwrite</div><div class="long">util - copies all properties of one object to another, one level deep with optional overwrite<div class="mdetail-params"><strong>Parameters:</strong><ul><li><code>dest</code> : Object<div class="sub-desc">destination object that contains properties to be modified</div></li><li><code>src</code> : Object<div class="sub-desc">source object that contains properties to be copied</div></li><li><code>overwrite</code> : bool<div class="sub-desc">true to overwrite dest properties if they already exist.</div></li></ul><strong>Returns:</strong><ul><li>void</li></ul></div></div></div></td><td class="msource">TableHelper</td></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-deleteRows"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-deleteRows">deleteRows</a></b>(&nbsp;<code>Array&nbsp;of</code>,&nbsp;<code>function&nbsp;callback</code>,&nbsp;<code>Object&nbsp;scope</code>&nbsp;)
    :
                                        void<div class="mdesc"><div class="short">Deletes row(s) from the table</div><div class="long">Deletes row(s) from the table<div class="mdetail-params"><strong>Parameters:</strong><ul><li><code>of</code> : Array<div class="sub-desc">Objects} rows array of rows to drop, each row represented by an object with key/value pairs for the WHERE clause   (i.e. [{id='2'},{key2='3'}].
					 Each clause will be AND'd together.</div></li><li><code>callback</code> : function<div class="sub-desc">function that will be called if the query finishes. Called with the following parameters:<ul class="mdetail-params">
		     <li><b>this</b> : <a href="output/DbRelay.TableHelper.html" ext:cls="DbRelay.TableHelper">DbRelay.TableHelper</a><div class="sub-desc">the DbRelay.TableHelper object</div></li>
				 <li><b>response</b> : Object<div class="sub-desc">the raw DbRelay response object</div></li>
		 </ul></div></li><li><code>scope</code> : Object<div class="sub-desc">scope of callback function (defaults to global scope)</div></li></ul><strong>Returns:</strong><ul><li>void</li></ul></div></div></div></td><td class="msource">TableHelper</td></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-fetchAll"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-fetchAll">fetchAll</a></b>(&nbsp;<code>function&nbsp;callback</code>,&nbsp;<code>Object&nbsp;scope</code>&nbsp;)
    :
                                        void<div class="mdesc"><div class="short">Fetches all columns for all rows, no conditions or filters.</div><div class="long">Fetches all columns for all rows, no conditions or filters.<div class="mdetail-params"><strong>Parameters:</strong><ul><li><code>callback</code> : function<div class="sub-desc">function that will be called if the query finishes. Called with the following parameters:<ul class="mdetail-params">
			     <li><b>this</b> : <a href="output/DbRelay.TableHelper.html" ext:cls="DbRelay.TableHelper">DbRelay.TableHelper</a><div class="sub-desc">the DbRelay.TableHelper object</div></li>
					 <li><b>response</b> : Object<div class="sub-desc">the raw DbRelay response object</div></li>
			 </ul></div></li><li><code>scope</code> : Object<div class="sub-desc">scope of callback function (defaults to global scope)</div></li></ul><strong>Returns:</strong><ul><li>void</li></ul></div></div></div></td><td class="msource">TableHelper</td></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-fetchPagingRows"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-fetchPagingRows">fetchPagingRows</a></b>(&nbsp;<code>Object&nbsp;cfg</code>,&nbsp;<code>function&nbsp;success</code>,&nbsp;<code>function&nbsp;error</code>,&nbsp;<code>Object&nbsp;scope</code>&nbsp;)
    :
                                        void<div class="mdesc"><div class="short">Fetches paged rows from the table</div><div class="long">Fetches paged rows from the table<div class="mdetail-params"><strong>Parameters:</strong><ul><li><code>cfg</code> : Object<div class="sub-desc">config object with the following (* required):
		<ul class="mdetail-params">
		     <li><b>columns</b> : String<div class="sub-desc">columns to return, defaults to * . Ex:  col1,col2 </div></li>
		     <li><b>recordStart</b> : String<div class="sub-desc">starting 0-based index if paging (defaults to 0)</div></li>
		     <li><b>pagingSize</b> : String<div class="sub-desc">paging size (defaults to 20) </div></li>
				<li><b>where</b> : String<div class="sub-desc">WHERE clause</div></li>
				<li><b>orderBy</b> : String<div class="sub-desc">server-side ORDER BY column (defaults to the first column) </div></li>
		 </ul></div></li><li><code>success</code> : function<div class="sub-desc">function that will be called if the query succeeds. Called with the following parameters:<ul class="mdetail-params">
			     <li><b>this</b> : <a href="output/DbRelay.TableHelper.html" ext:cls="DbRelay.TableHelper">DbRelay.TableHelper</a><div class="sub-desc">the DbRelay.TableHelper object</div></li>
					 <li><b>response</b> : Object<div class="sub-desc">the raw DbRelay response object</div></li>
					 <li><b>cfg</b> : Object<div class="sub-desc">original config params</div></li>
			 </ul></div></li><li><code>error</code> : function<div class="sub-desc">function that will be called if the query fails. Called with the following parameters:<ul class="mdetail-params">
			     <li><b>this</b> : <a href="output/DbRelay.TableHelper.html" ext:cls="DbRelay.TableHelper">DbRelay.TableHelper</a><div class="sub-desc">the DbRelay.TableHelper object</div></li>
					 <li><b>response</b> : Object<div class="sub-desc">the raw DbRelay response object</div></li>
					 <li><b>cfg</b> : Object<div class="sub-desc">original config params</div></li>
			 </ul></div></li><li><code>scope</code> : Object<div class="sub-desc">optional scope of callback functions</div></li></ul><strong>Returns:</strong><ul><li>void</li></ul></div></div></div></td><td class="msource">TableHelper</td></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-fetchRows"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-fetchRows">fetchRows</a></b>(&nbsp;<code>Object&nbsp;cfg</code>,&nbsp;<code>function&nbsp;callback</code>,&nbsp;<code>Object&nbsp;scope</code>&nbsp;)
    :
                                        void<div class="mdesc"><div class="short">Fetches all columns for all rows, no conditions or filters.</div><div class="long">Fetches all columns for all rows, no conditions or filters.<div class="mdetail-params"><strong>Parameters:</strong><ul><li><code>cfg</code> : Object<div class="sub-desc">parameters: 
		<ul class="mdetail-params">
		     <li><b>columns</b> : String<div class="sub-desc">columns to return, defaults to * . Ex:  col1,col2 </div></li>
				<li><b>where</b> : String<div class="sub-desc">WHERE clause</div></li>
				<li><b>orderBy</b> : String<div class="sub-desc">server-side ORDER BY column</div></li>
		 </ul></div></li><li><code>callback</code> : function<div class="sub-desc">function that will be called if the query finishes. Called with the following parameters:<ul class="mdetail-params">
			     <li><b>this</b> : <a href="output/DbRelay.TableHelper.html" ext:cls="DbRelay.TableHelper">DbRelay.TableHelper</a><div class="sub-desc">the DbRelay.TableHelper object</div></li>
					 <li><b>response</b> : Object<div class="sub-desc">the raw DbRelay response object</div></li>
			 </ul></div></li><li><code>scope</code> : Object<div class="sub-desc">scope of callback function (defaults to global scope)</div></li></ul><strong>Returns:</strong><ul><li>void</li></ul></div></div></div></td><td class="msource">TableHelper</td></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-getQueryHelper"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-getQueryHelper">getQueryHelper</a></b>()
    :
                                        DbRelay.QueryHelper<div class="mdesc"><div class="short">Get the DbRelay.QueryHelper for this TableHelper.</div><div class="long">Get the <a href="output/DbRelay.QueryHelper.html" ext:cls="DbRelay.QueryHelper">DbRelay.QueryHelper</a> for this TableHelper.<div class="mdetail-params"><strong>Parameters:</strong><ul><li>None.</li></ul><strong>Returns:</strong><ul><li><code>DbRelay.QueryHelper</code><div class="sub-desc">The query helper object that belongs to this TableHelper.</div></li></ul></div></div></div></td><td class="msource">TableHelper</td></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-queryColumns"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-queryColumns">queryColumns</a></b>(&nbsp;<code>function&nbsp;success</code>,&nbsp;<code>function&nbsp;error</code>,&nbsp;<code>Object&nbsp;scope</code>&nbsp;)
    :
                                        void<div class="mdesc"><div class="short">Queries for a list of columns in this table</div><div class="long">Queries for a list of columns in this table<div class="mdetail-params"><strong>Parameters:</strong><ul><li><code>success</code> : function<div class="sub-desc">function that will be called if the query succeeds. Called with the following parameters:<ul class="mdetail-params">
			     <li><b>this</b> : <a href="output/DbRelay.TableHelper.html" ext:cls="DbRelay.TableHelper">DbRelay.TableHelper</a><div class="sub-desc">the DbRelay.TableHelper object</div></li>
					 <li><b>response</b> : Object<div class="sub-desc">the raw DbRelay response object</div></li>
			     <li><b>columns</b> : Object<div class="sub-desc">sanitized columns data array (name, required, dataType)</div></li>
			 </ul></div></li><li><code>error</code> : function<div class="sub-desc">function that will be called if the query fails. 	Called with the following parameters:<ul class="mdetail-params">
				     <li><b>this</b> : <a href="output/DbRelay.TableHelper.html" ext:cls="DbRelay.TableHelper">DbRelay.TableHelper</a><div class="sub-desc">the DbRelay.TableHelper object</div></li>
				     <li><b>response</b> : Object<div class="sub-desc">the raw DbRelay response object</div></li>
				 </ul></div></li><li><code>scope</code> : Object<div class="sub-desc">Optional scope for the callbacks.  Defaults to window/global</div></li></ul><strong>Returns:</strong><ul><li>void</li></ul></div></div></div></td><td class="msource">TableHelper</td></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-queryPrimaryKeys"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-queryPrimaryKeys">queryPrimaryKeys</a></b>(&nbsp;<code>function&nbsp;success</code>,&nbsp;<code>function&nbsp;error</code>,&nbsp;<code>Object&nbsp;scope</code>&nbsp;)
    :
                                        void<div class="mdesc"><div class="short">Queries for this table's primary keys</div><div class="long">Queries for this table's primary keys<div class="mdetail-params"><strong>Parameters:</strong><ul><li><code>success</code> : function<div class="sub-desc">callback function that will be called if the query succeeds. Called with the following parameters:<ul class="mdetail-params">
		     <li><b>this</b> : <a href="output/DbRelay.TableHelper.html" ext:cls="DbRelay.TableHelper">DbRelay.TableHelper</a><div class="sub-desc">the DbRelay.TableHelper object</div></li>
				 <li><b>response</b> : Object<div class="sub-desc">the raw DbRelay response object</div></li>
				 <li><b>keys</b> : Array<div class="sub-desc">Array of primary key column names</div></li>
		 </ul></div></li><li><code>error</code> : function<div class="sub-desc">optional callback function if the query fails. Function will be called with the following params: 
	<ul class="mdetail-params">
		     <li><b>this</b> : <a href="output/DbRelay.TableHelper.html" ext:cls="DbRelay.TableHelper">DbRelay.TableHelper</a><div class="sub-desc">the DbRelay.TableHelper object</div></li>
				 <li><b>response</b> : Object<div class="sub-desc">the raw DbRelay response object</div></li>
		 </ul></div></li><li><code>scope</code> : Object<div class="sub-desc">: scope of callback function (defaults to global scope)</div></li></ul><strong>Returns:</strong><ul><li>void</li></ul></div></div></div></td><td class="msource">TableHelper</td></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-safeSqlString"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-safeSqlString">safeSqlString</a></b>(&nbsp;<code>string&nbsp;s</code>&nbsp;)
    :
                                        string<div class="mdesc"><div class="short">SQL'ify a string value</div><div class="long">SQL'ify a string value<div class="mdetail-params"><strong>Parameters:</strong><ul><li><code>s</code> : string<div class="sub-desc">string to make safe</div></li></ul><strong>Returns:</strong><ul><li><code>string</code><div class="sub-desc">string with all single quotes replaced with '' AND also wrapped in single quotes (ex. 'Chicago''s'</div></li></ul></div></div></div></td><td class="msource">TableHelper</td></tr><tr class="method-row expandable "><td class="micon"><a href="#expand" class="exi">&nbsp;</a></td><td class="sig"><a id="DbRelay.TableHelper-updateRows"></a><b><a href="source/sqlTable.html#method-DbRelay.TableHelper-updateRows">updateRows</a></b>(&nbsp;<code>Array&nbsp;set</code>,&nbsp;<code>Array&nbsp;wheres</code>,&nbsp;<code>function&nbsp;callback</code>,&nbsp;<code>Object&nbsp;scope</code>&nbsp;)
    :
                                        void<div class="mdesc"><div class="short">Batch update table rows.  This function assumes each row to be updated have the same where column(s), and that all WH...</div><div class="long">Batch update table rows.  This function assumes each row to be updated have the same where column(s), and that all WHERE clauses are AND'd together.<div class="mdetail-params"><strong>Parameters:</strong><ul><li><code>set</code> : Array<div class="sub-desc">array of objects of columnName:setValue pairs  ex. [{name='Fred'},{name='Ted'}] or array of strings, where string is sql where clause['name LIKE \'%co%\''].  Array can contain mixed objects & strings.</div></li><li><code>wheres</code> : Array<div class="sub-desc">array of objects to use in the where clause. Should be same length as set param  ex: [{id='2'},{key2='3'}]</div></li><li><code>callback</code> : function<div class="sub-desc">function that will be called if the query finishes. Called with the following parameters:<ul class="mdetail-params">
		     <li><b>this</b> : <a href="output/DbRelay.TableHelper.html" ext:cls="DbRelay.TableHelper">DbRelay.TableHelper</a><div class="sub-desc">the DbRelay.TableHelper object</div></li>
				 <li><b>response</b> : Object<div class="sub-desc">the raw DbRelay response object</div></li>
		 </ul></div></li><li><code>scope</code> : Object<div class="sub-desc">scope of callback function (defaults to global scope)</div></li></ul><strong>Returns:</strong><ul><li>void</li></ul></div></div></div></td><td class="msource">TableHelper</td></tr></tbody></table><a id="DbRelay.TableHelper-events"></a><h2>Public Events</h2><div class="no-members">This class has no public events.</div></div>